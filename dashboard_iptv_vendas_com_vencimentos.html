<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RVPLAY IPTV – Painel Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#0f172a;color:#e5e7eb;margin:0}
.login{display:flex;justify-content:center;align-items:center;height:100vh}
.login-box{background:#020617;padding:24px;border-radius:12px;width:320px}
.login-box h2{text-align:center;color:#38bdf8}
input,button{width:100%;padding:10px;margin-top:10px;border-radius:8px;border:none}
button{background:#38bdf8;color:#020617;font-weight:bold;cursor:pointer}
header{background:#020617;padding:16px;text-align:center;font-size:22px;font-weight:bold}
.container{padding:16px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
.card{background:#020617;padding:16px;border-radius:12px}
.card h2{font-size:15px;color:#38bdf8;margin:0}
.card p{font-size:26px;margin:8px 0 0}
table{width:100%;border-collapse:collapse;margin-top:24px;background:#020617;border-radius:12px;overflow:hidden}
th,td{padding:10px}
th{color:#38bdf8;text-align:left}
.ativo{color:#22c55e;font-weight:bold}
.vencendo{color:#eab308;font-weight:bold}
.vencido{color:#ef4444;font-weight:bold}
.actions button{width:auto;margin-right:6px;padding:6px 10px}
.footer{margin-top:24px;font-size:13px;color:#94a3b8;text-align:center}
</style>
</head>
<body>

<div class="login" id="login">
  <div class="login-box">
    <h2>Login Admin IPTV</h2>
    <input id="user" placeholder="Usuário" value="admin">
    <input id="pass" type="password" placeholder="Senha" value="12345">
    <button onclick="login()">Entrar</button>
  </div>
</div>

<div id="dashboard" style="display:none">
<header>RVPLAY IPTV – Painel Admin</header>
<div class="container">

<div class="cards">
  <div class="card"><h2>Clientes Ativos</h2><p id="ativos">0</p></div>
  <div class="card"><h2>Vencendo</h2><p id="vencendo">0</p></div>
  <div class="card"><h2>Vencidos</h2><p id="vencidos">0</p></div>
  <div class="card"><h2>Faturamento</h2><p id="faturamento">R$ 0</p></div>
</div>

<h2 style="margin-top:32px;color:#38bdf8">Cadastro de Cliente</h2>
<p style="font-size:14px;color:#94a3b8">Pagamento via Pix • Envie o comprovante pelo WhatsApp</p>
<input id="nome" placeholder="Nome do cliente">
<input id="plano" placeholder="Plano (Mensal/Trimestral)">
<input id="valor" type="number" placeholder="Valor">
<input id="dias" type="number" placeholder="Dias do plano">
<button onclick="addCliente()">Adicionar Cliente</button>

<table>
<thead><tr><th>Cliente</th><th>Plano</th><th>Vencimento</th><th>Valor</th><th>Status</th><th>Ações</th></tr></thead>
<tbody id="lista"></tbody>
</table>

<button onclick="exportar()" style="margin-top:16px">Exportar Lista (CSV)</button>

<div class="footer">RVPLAY IPTV • WhatsApp automático ativo • Sistema pronto para hospedagem online<br>Pix para pagamento disponível</div>
</div>
</div>

<script>
let clientes=[];
function login(){
 if(user.value==='admin'&&pass.value==='12345'){
  loginDiv.style.display='none';dashboard.style.display='block';
 }
}
const loginDiv=document.getElementById('login');
const dashboard=document.getElementById('dashboard');

function addCliente(){
 const pixMsg='Pagamento via Pix RVPLAY IPTV
Chave Pix: SUA-CHAVE-PIX-AQUI';
 alert(pixMsg);
(){
 const venc=new Date();venc.setDate(venc.getDate()+Number(dias.value));
 clientes.push({nome:nome.value,plano:plano.value,valor:Number(valor.value),venc:venc});
 render();
}

function render(){
 let hoje=new Date();let fat=0,a=0,v=0,vd=0;lista.innerHTML='';
 clientes.forEach((c,i)=>{
  let status='ativo';
  if(c.venc<hoje){status='vencido';vd++}
  else if((c.venc-hoje)/86400000<=3){status='vencendo';v++}
  else{a++}
  fat+=c.valor;
  let msg=`Olá ${c.nome}, sua IPTV RVPLAY vence em ${c.venc.toLocaleDateString()}. Evite o bloqueio!`;
  let wa=`https://wa.me/55SEUNUMERO?text=${encodeURIComponent(msg)}`;
  lista.innerHTML+=`<tr><td>${c.nome}</td><td>${c.plano}</td><td>${c.venc.toLocaleDateString()}</td><td>R$ ${c.valor}</td><td class="${status}">${status}</td><td class="actions"><a href="${wa}" target="_blank"><button>WhatsApp</button></a> <button onclick="clientes.splice(${i},1);render()">Excluir</button></td></tr>`;
 });
 ativos.innerText=a;vencendo.innerText=v;vencidos.innerText=vd;faturamento.innerText='R$ '+fat;
}
  else if((c.venc-hoje)/86400000<=3){status='vencendo';v++}
  else{a++}
  fat+=c.valor;
  lista.innerHTML+=`<tr><td>${c.nome}</td><td>${c.plano}</td><td>${c.venc.toLocaleDateString()}</td><td>R$ ${c.valor}</td><td class="${status}">${status}</td><td class="actions"><button onclick="clientes.splice(${i},1);render()">Excluir</button></td></tr>`;
 });
 ativos.innerText=a;vencendo.innerText=v;vencidos.innerText=vd;faturamento.innerText='R$ '+fat;
}

function exportar(){
 let csv='Nome,Plano,Vencimento,Valor\n';
 clientes.forEach(c=>csv+=`${c.nome},${c.plano},${c.venc.toLocaleDateString()},${c.valor}\n`);
 let a=document.createElement('a');a.href='data:text/csv;charset=utf-8,'+csv;a.download='clientes_iptv.csv';a.click();
}
</script>
</body>
</html>
